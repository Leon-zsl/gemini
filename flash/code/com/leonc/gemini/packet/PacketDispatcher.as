package com.leonc.gemini.packet{		import flash.external.*;	//import flash.utils.Dictionary;	import flash.display.Stage;	import flash.events.Event;	import flash.events.EventDispatcher;	import com.leonc.gemini.packet.*;		public class PacketDispatcher extends EventDispatcher	{		public function startup():void		{			//do nothing		}		public function shutdown():void		{			//do nothing		}				public function update():void		{			//d nothing		}		public function connectServer(name:String, ip:String, port:int)		{			ExternalInterface.call("Packet_ConnectServer", name, ip, port);		}				public function disconnectServer(name:String):void		{			ExternalInterface.call("Packet_DisconnectServer", name);		}		public function sendPacket(name:String, pck:Packet):void		{			ExternalInterface.call("Packet_TransferMsgFromSF", name, pck.opcode, pck.data);		}				public function registerHandler(msg:String, func:Function):void		{			this.addEventListener(msg, func);		}		public function registerHandlerByOpcode(op:int, func:Function):void		{			this.addEventListener("" + op, func);		}		private function handlePacket(name:String, pck:Packet):void		{			var e:PacketEvent = new PacketEvent("" + pck.opcode);			e.name = name;			e.packet = pck;			this.dispatchEvent(e);		}		private function handleError(name:String, err:int):void		{			var e:PacketEvent = new PacketEvent(PacketEvent.CONN_ERROR);			e.name = name;			e.error = err;			this.dispatchEvent(e);		}		//used by cpp code		public function _recvPacket(name:String, op:int, data:String):void		{			var pck:Packet = new Packet();			pck.opcode = op;			pck.data = data;			handlePacket(name, pck);		}		//used by cpp code		public function _connError(name:String, err:int):void		{			handleError(name, err);		}	}}